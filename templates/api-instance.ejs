<%
/** 
* @description 모듈별(entity) api 인스턴스 생성 템플릿 입니다.
*/

const { utils, route, config, modelTypes } = it;
const { _, pascalCase, require } = utils;
const apiClassName = pascalCase(route.moduleName);
const routes = route.routes;
const dataContracts = _.map(modelTypes, "name");

const moduleConfig = routes.at(0)?.moduleConfig;
const codegenConfig = routes.at(0)?.codegenConfig;

const { pathInfo } = codegenConfig.customOutput;
const resolveRelativeImportPath = moduleConfig.utils.resolveRelativeImportPath({
  fromPath: pathInfo.apiInstance.output.relative
})
%>

import { kyInstance } from "@/shared/api/instance"

<%~ includeFile('./imports/api-class.ejs', { ...it, moduleConfig, codegenConfig, resolveRelativeImportPath }) %>


const <%= route.moduleName %>Api = new <%= apiClassName %>Api(kyInstance);

export { <%= route.moduleName %>Api };
